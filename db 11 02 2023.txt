CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_inv_detail` AS select `invoice_detail`.`InvoiceMasterID` AS `InvoiceMasterID`,`invoice_detail`.`InvoiceNo` AS `InvoiceNo`,`invoice_detail`.`ItemID` AS `ItemID`,`invoice_detail`.`SupplierID` AS `SupplierID`,`invoice_detail`.`Qty` AS `Qty`,`invoice_detail`.`Rate` AS `Rate`,`item`.`ItemName` AS `ItemName`,`invoice_detail`.`Gross` AS `Gross`,`invoice_detail`.`Total` AS `Total` from (`invoice_detail` join `item` on(`invoice_detail`.`ItemID` = `item`.`ItemID`))


CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_inventory` AS select `invoice_detail`.`ItemID` AS `ItemID`,`item`.`ItemName` AS `ItemName`,`item`.`UnitName` AS `UnitName`,sum(if(left(`invoice_detail`.`InvoiceNo`,2) = 'CN',`invoice_detail`.`Qty`,0)) AS `SaleReturn`,sum(if(left(`invoice_detail`.`InvoiceNo`,3) = 'BIL',`invoice_detail`.`Qty`,0)) AS `QtyIn`,sum(if(left(`invoice_detail`.`InvoiceNo`,3) = 'TAX',`invoice_detail`.`Qty`,0)) AS `QtyOut`,sum(if(left(`invoice_detail`.`InvoiceNo`,3) = 'BIL',`invoice_detail`.`Qty`,0) + if(left(`invoice_detail`.`InvoiceNo`,2) = 'CN',`invoice_detail`.`Qty`,0)) - sum(if(left(`invoice_detail`.`InvoiceNo`,3) = 'TAX',`invoice_detail`.`Qty`,0)) AS `Balance` from (`invoice_detail` join `item` on(`invoice_detail`.`ItemID` = `item`.`ItemID`)) group by `invoice_detail`.`ItemID`,`item`.`ItemName`,`item`.`UnitName`



CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_inventory_detail` AS select `invoice_detail`.`ItemID` AS `ItemID`,`item`.`ItemName` AS `ItemName`,`item`.`UnitName` AS `UnitName`,if(left(`invoice_detail`.`InvoiceNo`,2) = 'CN',`invoice_detail`.`Qty`,0) AS `SaleReturn`,if(left(`invoice_detail`.`InvoiceNo`,3) = 'BIL',`invoice_detail`.`Qty`,0) AS `QtyIn`,if(left(`invoice_detail`.`InvoiceNo`,3) = 'TAX',`invoice_detail`.`Qty`,0) AS `QtyOut`,`invoice_master`.`Date` AS `Date`,`invoice_detail`.`InvoiceNo` AS `InvoiceNo`,`invoice_master`.`InvoiceMasterID` AS `InvoiceMasterID` from ((`invoice_detail` join `item` on(`invoice_detail`.`ItemID` = `item`.`ItemID`)) join `invoice_master` on(`invoice_master`.`InvoiceMasterID` = `invoice_detail`.`InvoiceMasterID`))